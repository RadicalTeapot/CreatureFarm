#:kivy 1.10.0

<TemplateForm@Widget>:
    template_name: ''

    available_list: available_list
    selected_list: selected_list

    add_button: add
    remove_button: remove
    save_button: save
    clear_button: clear

    text_input: text_input

    biomass: '0'

    canvas:
        Color:
            rgb: 1.0, 1.0, 1.0
        Rectangle:
            pos: self.pos
            size: self.size

    GridLayout:
        pos: root.pos
        size: root.size
        cols: 1
        padding: 5
        spacing: 5
        RelativeLayout:
            size_hint: (1.0, None)
            height: 30
            orientation: 'horizontal'
            Label:
                text: 'Name'
                size_hint:(.1, 1.0)
                pos_hint: {'x': 0., 'center_y': .5}
                color: 0., 0., 0., 1.
                halign: 'left'
                valign: 'center'
                text_size: self.size
            TextInput:
                multiline: False
                size_hint:(.9, 1.0)
                pos_hint: {'right': 1., 'center_y': .5}
                text: root.template_name
                id: text_input
        BoxLayout:
            size_hint: (1.0, 1.0)
            orientation: 'horizontal'
            spacing: 10
            padding: 10

            BoxLayout:
                orientation: 'vertical'
                size_hint: (.8, 1.0)
                spacing: 5

                Label:
                    size_hint: (1.0, None)
                    height: 10
                    text: 'Available'
                    color: 0., 0., 0., 1.

                ListWidget:
                    id: available_list
                    size_hint: (1.0, 1.0)
                    bg_color: (.8, .8, .8)

            RelativeLayout:
                size_hint: (.1, 1.0)
                Button:
                    size_hint: (1.0, .1)
                    pos_hint: {'x': 0., 'y': .3}
                    text: '<-'
                    id: remove

                Button:
                    size_hint: (1.0, .1)
                    pos_hint: {'x': 0., 'top': .7}
                    text: '->'
                    id: add

            BoxLayout:
                orientation: 'vertical'
                size_hint: (.8, 1.0)
                spacing: 5

                Label:
                    size_hint: (1.0, None)
                    height: 10
                    text: 'Selected'
                    color: 0., 0., 0., 1.

                ListWidget:
                    id: selected_list
                    bg_color: (.8, .8, .8)

        RelativeLayout:
            size_hint: (1.0, None)
            height: 30
            Label:
                size_hint: (.7, 1.0)
                pos_hint: {'x': 0., 'center_y': 0.5}
                halign: 'left'
                valign: 'center'
                text_size: self.size
                text: 'Cost: ' + root.biomass + ' biomass'
                color: 0., 0., 0., 1.
            BoxLayout:
                size_hint: (.3, 1.0)
                pos_hint: {'right': 1.0, 'center_y': 0.5}
                orientation: 'horizontal'
                spacing: 5

                Button:
                    id: save
                    text: 'Save'
                Button:
                    id: clear
                    text: 'Clear'

<TemplateEditor>:
    template_name: ''
    template_list: list
    template_text_input: form.text_input

    available_list: form.available_list
    selected_list: form.selected_list

    add_button: form.add_button
    remove_button: form.remove_button
    save_button: form.save_button
    clear_button: form.clear_button

    biomass: '0'

    canvas:
        Color:
            rgb: 0.25, 0.25, 0.25
        Rectangle:
            pos: self.pos
            size: self.size

    BoxLayout:
        size: root.size
        pos: root.pos
        orientation: 'horizontal'
        padding: 5
        spacing: 10

        ListWidget:
            size_hint: (.2, 1.)
            id: list
        TemplateForm:
            id: form
            biomass: root.biomass
            size_hint: (.8, 1.)
            template_name: root.template_name
